function dtPopupDirective(){function t(t,o){return o.templateUrl?o.templateUrl:"dt-popup.tmpl.html"}return{scope:{},restrict:"E",replace:!0,templateUrl:t,controller:["$scope",dtPopupController],controllerAs:"ctrl",link:function(t){t.$on("DtPopupShow",function(o,e){t.origin=e.model,t.model=angular.copy(e.model),t.title=e.title,t.url=e.url,t.saveAction=e.saveAction,t.addMode=!0,t.popupForm.$setPristine(),t.popupForm.$submitted=!1})}}}function dtPopupController(t){this.isSubmitted=function(){return t.popupForm.$submitted},this.cancel=function(){t.addMode=!1},this.save=function(){return t.popupForm.$invalid?(t.popupForm.$setDirty(),void(t.popupForm.$submitted=!0)):(t.saveAction({model:t.model}).then(function(){t.origin&&angular.copy(t.model,t.origin)}),void(t.addMode=!1))}}function dtPopupLinkDirective(){return{scope:{model:"=ngModel",title:"@",url:"=",initAction:"&",saveAction:"&"},restrict:"E",replace:!0,controller:["$scope","$rootScope","$q",dtPopupLinkController],controllerAs:"ctrl",template:'<button ng-click="ctrl.open()">{{title}}</button>'}}function dtPopupLinkController(t,o,e){this.open=function(){t.model||(t.model={});var n=t.initAction({model:t.model});n||(n=e.when()),n.then(function(){o.$broadcast("DtPopupShow",t)})}}var popupModule=angular.module("dev-team-popup",[]);popupModule.directive("dtPopup",dtPopupDirective).directive("dtPopupLink",dtPopupLinkDirective),angular.module("dev-team-popup").run(["$templateCache",function(t){t.put("dt-popup.tmpl.html",'<div class="fade popup" ng-class="{modal: addMode, in: addMode}" tabindex="-1" ng-style="addMode && {\'display\': \'block\'} || {\'display\': \'none\'}"><div class="modal-dialog" ng-form="popupForm" ng-class="{submitted: popupForm.$submitted}"><div class="modal-content"><div class="modal-header"><button type="button" class="close" ng-click="ctrl.cancel()">&times;</button><h4 class="modal-title">{{title}}</h4></div><div class="modal-body" ng-include="url"></div><div class="modal-footer"><button type="button" class="btn btn-white" ng-click="ctrl.cancel()">Cancel</button><button type="button" class="btn btn-primary" ng-click="ctrl.save()">Save</button></div></div></div></div>')}]);
//# sourceMappingURL=popup-directive.min.js.map
