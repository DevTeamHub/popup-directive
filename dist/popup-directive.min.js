function dtPopupDirective(){function a(a,b){return b.templateUrl?b.templateUrl:"dt-popup.tmpl.html"}return{scope:{},restrict:"E",replace:!0,templateUrl:a,controller:["$scope",dtPopupController],controllerAs:"ctrl",link:function(a){a.$on("DtPopupShow",function(b,c){a.origin=c.model,a.model=angular.copy(c.model),a.title=c.title,a.url=c.url,a.saveAction=c.saveAction,a.addMode=!0,a.popupForm.$setPristine(),a.popupForm.$submitted=!1})}}}function dtPopupController(a){this.isSubmitted=function(){return a.popupForm.$submitted},this.cancel=function(){a.addMode=!1},this.save=function(){return a.popupForm.$invalid?(a.popupForm.$setDirty(),void(a.popupForm.$submitted=!0)):(a.saveAction({model:a.model}).then(function(){a.origin&&angular.copy(a.model,a.origin)}),void(a.addMode=!1))}}function dtPopupLinkDirective(){return{scope:{model:"=ngModel",title:"@",url:"=",initAction:"&",saveAction:"&"},restrict:"E",replace:!0,controller:["$scope","$rootScope","$q",dtPopupLinkController],controllerAs:"ctrl",template:'<button ng-click="ctrl.open()">{{title}}</button>'}}function dtPopupLinkController(a,b,c){this.open=function(){a.model||(a.model={});var d=a.initAction({model:a.model});d||(d=c.when()),d.then(function(){b.$broadcast("DtPopupShow",a)})}}var popupModule=angular.module("dev-team-popup",[]);popupModule.directive("dtPopup",dtPopupDirective).directive("dtPopupLink",dtPopupLinkDirective),angular.module("dev-team-popup").run(["$templateCache",function(a){a.put("dt-popup.tmpl.html",'<div class="fade popup" ng-class="{modal: addMode, in: addMode}" tabindex="-1" ng-style="addMode && {\'display\': \'block\'} || {\'display\': \'none\'}"><div class="modal-dialog" ng-form="popupForm" ng-class="{submitted: popupForm.$submitted}"><div class="modal-content"><div class="modal-header"><button type="button" class="close" ng-click="ctrl.cancel()">&times;</button><h4 class="modal-title">{{title}}</h4></div><div class="modal-body" ng-include="url"></div><div class="modal-footer"><button type="button" class="btn btn-white" ng-click="ctrl.cancel()">Cancel</button><button type="button" class="btn btn-primary" ng-click="ctrl.save()">Save</button></div></div></div></div>')}]);
//# sourceMappingURL=popup-directive.min.js.map